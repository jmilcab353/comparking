<div class="container text-white mt-4 mb-5">
    <div class="comparking-box">
        <h4 class="text-center mb-4">Gestión de denuncias</h4>

        <div *ngIf="estado === 'cargando'" class="text-center">Cargando denuncias...</div>
        <div *ngIf="estado === 'vacio'" class="text-center text-warning">No hay denuncias registradas.</div>
        <div *ngIf="estado === 'error'" class="alert alert-danger text-center">{{ errorMsg }}</div>

        <div *ngIf="estado === 'ok'" class="row">
            <div class="col-12 mb-3" *ngFor="let d of denuncias">
                <div class="p-3 rounded hover-effect aparcamiento-card">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <p><strong>Denunciante:</strong> {{ d.denunciante }}</p>
                            <p><strong>Denunciado:</strong> {{ d.denunciado }}</p>
                            <p><strong>Aparcamiento:</strong> {{ d.direccionAparcamiento }}</p>
                            <p><strong>Descripción:</strong> {{ d.descripcion }}</p>
                            <p><strong>Fecha:</strong> {{ d.fecha | date: 'short' }}</p>
                            <p>
                                <strong>Estado: </strong>
                                <span [ngClass]="{
                  'text-warning': d.estado === 'pendiente',
                  'text-success': d.estado === 'revisada'
                }">{{ d.estado }}</span>
                            </p>
                        </div>

                        <div class="text-end">
                            <button *ngIf="d.estado === 'pendiente'" class="btn btn-success btn-sm me-2"
                                (click)="confirmarDenuncia(d.id)">
                                Confirmar
                            </button>
                            <button class="btn btn-danger btn-sm" (click)="abrirModal(d.id)">
                                Eliminar
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal confirmación eliminar -->
<div *ngIf="modalConfirmacionId !== null" class="modal-overlay">
    <div class="modal-box">
        <h5 class="text-center mb-4">¿Desea eliminar esta denuncia?</h5>
        <div class="d-flex justify-content-center gap-3">
            <button class="btn btn-secondary" (click)="cerrarModal()">Cancelar</button>
            <button class="btn btn-danger" (click)="eliminarDenuncia(modalConfirmacionId!)">Eliminar</button>
        </div>
    </div>
</div>